---
title: "关于 Headless CMS 的思考"
createTime: "2021-04-27"
updateTime: "2021-05-11"
coverImage: "./cover.jpg"
intro: "Headless CMS 能够为初创、小型企业赋能，降低研发和运维成本，让企业更专注于自己的业务和运营工作"
---

## 前言

2020年底，因公司几个开发接连离职，后续项目都开始交由我来接管。即便我能够全栈开发，但是谁不想摸鱼🏄、准时下班呢:P，毕竟三端一个人开发的压力还是很大的（以往公司的开发模式，每项目都至少配备2个开发）。

因此，本着以 **偷懒** 为目标的生产力发展原则🤫，根据项目要求，我开始着手调研《如何不写一行代码，开发整个软件系统》，结果真被我找到了一个可行且易行的解决方案。当然，不写代码是不可能的🙃，但该方案确实省去了管理端和（大部分）数据接口的开发工作，可谓我司的 **“第一次工业革命”** 。

这个方案即 [cloudbase-cms](https://docs.cloudbase.net/cms/intro.html) ，由腾讯云出品～

借助这套现成的内容管理系统，基本只需开发定制的用户端（网页、小程序）即可。因此开发效率很高，平均每个项目开发周期就10天左右。公司并没有因为开发离职而降低生产力，我也偷到懒了，双赢 🎉🎉🎉

但是呢，腾讯云这套CMS还是有些遗憾的地方，比如缺少了多媒体管理，不支持关系型数据库等等。本着技术探索精神，本人在上班摸鱼期间，继续调研了一下国内外的几个 `headless cms` 软件/平台。也在想着能否开发公司内部使用内容管理系统，以弥补腾讯的缺憾。

## 什么是 headless cms

Headless cms 表示 **只有后端** 的内容管理系统，它提供可视化的管理界面进行数据编辑和存储数据，并通过 API 将数据交付至各种终端（电脑、手机、手表等）。

相比传统的 cms ，如 [wordpress](https://wordpress.com/)，多了一个 `headless` 的特性，即无需将数据内容绑定页面模板。因此在跨平台能力上，更加出色。

从开发角度，也可以把他理解为一个更加“人性化”的 `navicat` 。

## 为什么要开发/使用这个系统

简单来讲，就是提高开发和交付效率并降低成本，员工偷懒、老板开心🤪。

就像云原生弱化了服务器硬件、操作系统的技术细节，无头CMS弱化了 **后端服务细节** ，做到了 **技术下沉**，开发只需要关注自己公司的业务细节即可。

以 `cloudbase-cms` 操作示例，能很清楚的说明这个系统的特点。

### 编辑内容

todo

### 使用内容

todo

## 使用者

无头CMS管理端的使用者包括，开发者、运营人员。开发者负责内容结构的定义，运营负责数据的录入，都在一个管理入口完成。

## 使用场景

todo

## 部署环境

像腾讯云的 `cloudbase-cms` 就比较“鸡贼”了，因为基础设施通过腾讯云的SDK进行对接，如云数据库，因此由 **供应商锁定** 之嫌。

## 框架设计

个人理解，一个基本可用的 headless cms ，至少包含：

+ 三个端：管理网站、管理端API、客户端API
+ 五个模块：权限、用户角色、文档结构、文档内容、多媒体内容

目前主流的 headless cms 软件/平台都会采用 `nodejs` 进行开发。其单线程非阻塞的特性，非常适合这种I/O密集型场景。也降低了开发心智成本，采用 `javascript` 或者 `typescript` 最为前后端统一的开发语言。

> Atwood's Law: Any application that can be written in JavaScript, will eventually be written in JavaScript.

后端框架，可以选择 [nestjs](https://github.com/nestjs/nest) 或者 [eggjs](https://github.com/eggjs/egg) ，这两个都是比较成熟的企业级框架。其中 eggjs 可以通过 [midwayjs](https://github.com/midwayjs/midway) 获得完善的 typescript 开发体验。

前端框架选择范围就更多了，React开发者可以考虑 umi+antd ，Vue开发者可以考虑 vite+elementui，这里就不再赘述了～

## 总结

todo

## 为什么还要再开发一个 Headless CMS

目前这个领域，在海外发展日趋成熟，例如 [Strapi](https://strapi.io/)、Contentful 等，其中 Strapi 更是在2020年拿到了 [1000万美金](https://strapi.io/blog/announcing-strapi-10m-series-a-funding) 的A轮融资。

但是这些“墙外”的无头CMS，对于中国大陆用户却不太友好，缺少了 **本地化** 的能力。体现在：

1. 缺少简体中文的支持
2. 无法选择国内云厂商提供的服务，如腾讯云的 CDN、Serverless Mysql

第一个问题还能够通过更新语言包的方式解决，但是第二个问题比较“致命”，直接导致了这些舶来的无头CMS服务无法正常地在中国大陆使用。毕竟不少国外的云厂商都被隔在了“墙外”～

反观国内，就我了解，目前只有腾讯云一家在开发和推广无头CMS，即 [cloudbase-cms](https://docs.cloudbase.net/cms/intro.html) 。虽然这个 Headless CMS 是开源的，但是却有 **供应商锁定之嫌** 。因为这个无头CMS，通过腾讯云定制的SDK接入了 [CloudBase](https://cloud.tencent.com/product/tcb) ，如云数据库、云存储、云函数等，这就导致了这套代码无法在其它云厂商，如阿里云上运行。

还有一个问题在于 CloudBase 本身。由于目前腾讯云无法做到内网配置，以及云数据库的性能限制（并发数低、不好做事务），导致了部分业务场景不方便实现或性能较差。

因此，如果能开发一个 Headless CMS ，接入国内主流云厂商，并做到本地化适配的，在国内市场可能会比较受欢迎。对于初创企业或者为政企提供软件服务的小公司，能够降低不少研发、部署成本的。
